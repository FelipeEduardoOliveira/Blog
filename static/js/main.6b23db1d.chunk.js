(this.webpackJsonpblogoliveira=this.webpackJsonpblogoliveira||[]).push([[0],{34:function(e,t,a){e.exports=a(67)},57:function(e,t,a){},58:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(32),c=a.n(o),s=a(9),i=a(10),u=a(16),l=a(15),m=a(14),p=a(3),h=a(2),d=a.n(h),f=a(6),g=a(5),v=a.n(g),b=(a(54),a(55),a(56),{apiKey:"AIzaSyBPYRZPwm0M1No5k9c5qw9O4QR5AChN_lg",authDomain:"consumoteste-2c7cf.firebaseapp.com",databaseURL:"https://consumoteste-2c7cf.firebaseio.com",projectId:"consumoteste-2c7cf",storageBucket:"consumoteste-2c7cf.appspot.com",messagingSenderId:"405102806284",appId:"1:405102806284:web:eb140433c250689b3b7529",measurementId:"G-PCFPGG3G3E"}),E=new(function(){function e(){Object(s.a)(this,e),v.a.initializeApp(b),this.banco=v.a.database(),this.storage=v.a.storage()}return Object(i.a)(e,[{key:"login",value:function(e,t){return v.a.auth().signInWithEmailAndPassword(e,t)}},{key:"register",value:function(){var e=Object(f.a)(d.a.mark((function e(t,a,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.auth().createUserWithEmailAndPassword(a,n);case 2:return r=v.a.auth().currentUser.uid,e.abrupt("return",v.a.database().ref("usuarios").child(r).set({nome:t,email:a,senha:n}));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"initializeUser",value:function(){return new Promise((function(e){v.a.auth().onAuthStateChanged(e)}))}},{key:"getCurrent",value:function(){return v.a.auth().currentUser&&v.a.auth().currentUser.email}},{key:"getCurrentUid",value:function(){return v.a.auth().currentUser&&v.a.auth().currentUser.uid}},{key:"logOut",value:function(){var e=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.auth().signOut();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getName",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v.a.auth().currentUser){e.next=2;break}return e.abrupt("return",null);case 2:return a=v.a.auth().currentUser.uid,e.next=5,v.a.database().ref("usuarios").child(a).once("value").then(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"newPost",value:function(){var e=Object(f.a)(d.a.mark((function e(t,a,n,r){var o,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=v.a.database().ref("posts"),c=o.push().key,e.next=4,o.child(c).set({descricao:t,imagem:a,nome:n,titulo:r});case 4:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}()}]),e}()),w=(a(57),a(58),function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={post:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;E.banco.ref("posts").on("value",(function(t){var a=e.state;a.post=[],t.forEach((function(e){a.post.push({id:e.key,nome:e.val().nome,descricao:e.val().descricao,img:e.val().imagem,titulo:e.val().titulo})})),a.post.reverse(),e.setState(a)}))}},{key:"render",value:function(){return r.a.createElement("section",{className:"post-section"},this.state.post.map((function(e){return r.a.createElement("article",{className:"main-post"},r.a.createElement("header",{className:"header-post"},r.a.createElement("div",null,r.a.createElement("strong",{className:"titulo-post"},e.titulo),r.a.createElement("hr",null),r.a.createElement("p",{className:"autor-post"},"Autor: ",e.nome))),r.a.createElement("div",{className:"container-foto"},r.a.createElement("img",{className:"foto-post",src:e.img,alt:"Imagem de uma caneca escrito JS"})),r.a.createElement("footer",{className:"footer-post"},r.a.createElement("h2",null,e.descricao)))})))}}]),a}(n.Component));var O=function(){return r.a.createElement("div",null,r.a.createElement("h1",null," 404 - page notFound"),r.a.createElement(m.b,{to:"/"},"Go back to home"))},y=a(7),j=(a(63),function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).login=Object(f.a)(d.a.mark((function e(){var t,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.loginInput,r=t.passwordInput,e.prev=1,e.next=4,E.login(a,r).then((function(){n.props.history.replace("/dashboard")})).catch((function(e){"auth/user-not-found"===e.code?alert("Usuario nao existe"):alert("C\xf3digo de erro: "+e.code)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),alert(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])}))),n.state={loginInput:"",passwordInput:"",alerta:!1},n.callAlert=n.callAlert.bind(Object(y.a)(n)),n.entrar=n.entrar.bind(Object(y.a)(n)),n.login=n.login.bind(Object(y.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){if(E.getCurrent())return this.props.history.replace("/dashboard")}},{key:"callAlert",value:function(){var e=this.state;!0===e.alerta?(e.alerta=!1,this.setState(e)):(e.alerta=!0,this.setState(e))}},{key:"entrar",value:function(e){this.login(),e.preventDefault()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.entrar,id:"logIn",className:"container-form"},r.a.createElement("label",null," Email:",r.a.createElement("input",{type:"email",value:this.state.loginInput,onChange:function(t){return e.setState({loginInput:t.target.value})},onFocus:"on",placeholder:"example@example.com"})),r.a.createElement("br",null),r.a.createElement("label",null," Senha:",r.a.createElement("input",{type:"password",value:this.state.passwordInput,onChange:function(t){return e.setState({passwordInput:t.target.value})},onFocus:"on",placeholder:"Hmsg12#"})),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"}," Login "),r.a.createElement("div",{className:"links"},r.a.createElement(m.b,{className:"register",to:"/register"},"Ainda n\xe3o tem cadastro?"),r.a.createElement("a",{className:"politica_senha",onClick:this.callAlert},"politica de senha")),!0===this.state.alerta?r.a.createElement("div",null,r.a.createElement("p",null,"Sua senha precisa ter mais que 8 caracteres"),r.a.createElement("p",null,"Sua senha precisa ter uma letra maiuscula"),r.a.createElement("p",null,"Sua senha precisa ter um numero"),r.a.createElement("p",null,"Sua senha precisa ter um caractere especial")):r.a.createElement("div",null)))}}]),a}(n.Component)),k=Object(p.f)(j),x=(a(64),function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onRegister=Object(f.a)(d.a.mark((function e(){var t,a,r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.name,r=t.loginInput,o=t.passwordInput,e.prev=1,e.next=4,E.register(a,r,o).then((function(){n.props.history.replace("/dashboard")})).catch((function(e){alert("C\xf3digo de erro: \n"+e.message)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),alert(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[1,6]])}))),n.state={name:"",loginInput:"",passwordInput:""},n.register=n.register.bind(Object(y.a)(n)),n.onRegister=n.onRegister.bind(Object(y.a)(n)),n}return Object(i.a)(a,[{key:"register",value:function(e){this.onRegister(),e.preventDefault()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Cadastre-se para aproveitar"),r.a.createElement("form",{onSubmit:this.register,className:"container",id:"register"},r.a.createElement("label",null,"Nome:"),r.a.createElement("input",{type:"text",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},autoFocus:"on",autoComplete:"off"}),r.a.createElement("label",null,"Email:"),r.a.createElement("input",{type:"email",value:this.state.loginInput,onChange:function(t){return e.setState({loginInput:t.target.value})},autoComplete:"off"}),r.a.createElement("label",null,"Senha:"),r.a.createElement("input",{type:"text",value:this.state.passwordInput,onChange:function(t){return e.setState({passwordInput:t.target.value})},autoComplete:"off"}),r.a.createElement("button",{type:"submit"},"Enviar")))}}]),a}(n.Component)),S=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).logOut=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.logOut().catch((function(e){console.log(e.massege)}));case 2:localStorage.removeItem("nome"),n.props.history.push("/");case 4:case"end":return e.stop()}}),e)}))),n.state={name:localStorage.nome},n.logOut=n.logOut.bind(Object(y.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.getCurrent()||this.props.history.replace("/login"),E.getName((function(e){localStorage.nome=e.val().nome,t.setState({name:localStorage.nome})}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Hello, ",this.state.name),r.a.createElement(m.b,{to:"/dashboard/new"},"Criar novo post"),r.a.createElement("br",null),r.a.createElement("p",null,"Logado com: ",E.getCurrent()," "),r.a.createElement("button",{onClick:this.logOut},"logOut"))}}]),a}(n.Component),C=(a(65),function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).newPost=Object(f.a)(d.a.mark((function e(){var t,a,r,o,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.descricao,r=t.url,o=t.nome,c=t.titulo,e.next=3,E.newPost(a,r,o,c).then((function(){n.setState({descricao:"",titulo:""}),alert("Publica\xe7\xe3o realizada com sucesso!")})).catch((function(e){alert(e.message)}));case 3:case"end":return e.stop()}}),e)}))),n.hundleFile=function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("image/png"!==(a=t.target.files[0]).type&&"image/jpeg"!==a.type&&"image/jpg"!==a.type){e.next=7;break}return e.next=4,n.setState({img:a});case 4:n.hundleUpload(),e.next=9;break;case 7:alert("imagem inv\xe1lida! "),n.setState({img:null});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.hundleUpload=Object(f.a)(d.a.mark((function e(){var t,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.img,a=E.getCurrentUid(),r=E.storage.ref("imagem/".concat(a,"/").concat(t.name)).put(t),e.next=5,r.on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);n.setState({progress:t})}),(function(e){alert("Erro: "+e)}),(function(){E.storage.ref("imagem/".concat(a)).child(t.name).getDownloadURL().then((function(e){n.setState({url:e})}))}));case 5:case"end":return e.stop()}}),e)}))),n.state={descricao:"",img:null,url:"",progress:"",nome:"",titulo:"",alert:""},n.newPost=n.newPost.bind(Object(y.a)(n)),n.cadastraPost=n.cadastraPost.bind(Object(y.a)(n)),n.hundleFile=n.hundleFile.bind(Object(y.a)(n)),n.hundleUpload=n.hundleUpload.bind(Object(y.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.getCurrent()||this.props.history.replace("/"),(t=this.state).nome=localStorage.getItem("nome"),this.setState(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cadastraPost",value:function(e){""!==this.state.titulo&&""!==this.state.descricao&&""!==this.state.url?!0===window.confirm("Tem certeza que desseja fazer esse post?")&&this.newPost():this.setState({alert:"Preencha todos os campos!"});e.preventDefault()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{id:"form-post",onSubmit:this.cadastraPost},r.a.createElement("span",null,this.state.alert),r.a.createElement("input",{type:"file",onChange:this.hundleFile}),""!==this.state.url?r.a.createElement("img",{src:this.state.url,width:"150",height:"100"}):r.a.createElement("progress",{value:this.state.progress,max:"100"}),r.a.createElement("label",null,"Titulo:"),r.a.createElement("input",{type:"text",value:this.state.titulo,placeholder:"Titulo do post",onChange:function(t){return e.setState({titulo:t.target.value})}}),r.a.createElement("label",null,"Descri\xe7\xe3o:"),r.a.createElement("textarea",{type:"text",value:this.state.descricao,placeholder:"Descri\xe7\xe3o do post",onChange:function(t){return e.setState({descricao:t.target.value})}}),r.a.createElement("button",{type:"submit"},"Enviar")))}}]),a}(n.Component));a(66);var I=function(){return r.a.createElement("header",{className:"main-header"},r.a.createElement("div",{className:"header-content"},r.a.createElement(m.b,{to:"/"},"Blog do Oliveira"),r.a.createElement(m.b,{to:"/login"},"Entrar")))},N=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={initializeFire:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;E.initializeUser().then((function(t){e.setState({initializeFire:t})}))}},{key:"render",value:function(){return!1!==this.state.initializeFire?r.a.createElement(m.a,null,r.a.createElement(I,null),r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:w}),r.a.createElement(p.a,{exact:!0,path:"/login",component:k}),r.a.createElement(p.a,{exact:!0,path:"/register",component:x}),r.a.createElement(p.a,{exact:!0,path:"/dashboard",component:S}),r.a.createElement(p.a,{exact:!0,path:"/dashboard/new",component:C}),r.a.createElement(p.a,{path:"*",component:O}))):r.a.createElement("h1",null,"Carregando...")}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.6b23db1d.chunk.js.map